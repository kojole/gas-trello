var global=this;function Http(){}(function(){'use strict';function a(a){if(a===void 0||null===a)throw new TypeError('Cannot convert first argument to object');for(var b,c=Object(a),d=1;d<arguments.length;d++)if(b=arguments[d],void 0!==b&&null!==b)for(var e=Object.keys(Object(b)),f=0,g=e.length;f<g;f++){var h=e[f],i=Object.getOwnPropertyDescriptor(b,h);void 0!==i&&i.enumerable&&(c[h]=b[h])}return c}function b(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function c(a){switch('undefined'==typeof a?'undefined':h(a)){case'string':return a;case'boolean':return a?'true':'false';case'number':return isFinite(a)?a:'';default:return'';}}function d(a,b,d,f){return b=b||'&',d=d||'=',null===a&&(a=void 0),'object'===('undefined'==typeof a?'undefined':h(a))?e(m(a),function(f){var g=encodeURIComponent(c(f))+d;return l(a[f])?e(a[f],function(a){return g+encodeURIComponent(c(a))}).join(b):g+encodeURIComponent(c(a[f]))}).join(b):f?encodeURIComponent(c(f))+d+encodeURIComponent(c(a)):''}function e(a,b){if(a.map)return a.map(b);for(var c=[],d=0;d<a.length;d++)c.push(b(a[d],d));return c}function f(a,c,d,e){c=c||'&',d=d||'=';var f={};if('string'!=typeof a||0===a.length)return f;var g=/\+/g;a=a.split(c);var h=1e3;e&&'number'==typeof e.maxKeys&&(h=e.maxKeys);var j=a.length;0<h&&j>h&&(j=h);for(var m=0;m<j;++m){var i,n,o,k,p=a[m].replace(g,'%20'),q=p.indexOf(d);0<=q?(i=p.substr(0,q),n=p.substr(q+1)):(i=p,n=''),o=decodeURIComponent(i),k=decodeURIComponent(n),b(f,o)?l(f[o])?f[o].push(k):f[o]=[f[o],k]:f[o]=k}return f}function g(a,b,c){var d=c.method+' '+c.url+' returned '+a+': '+b,e=new Error(d);return e.statusCode=a,e.body=b,e.request=c,e}({assign:a,polyfill:function(){Object.assign||Object.defineProperty(Object,'assign',{enumerable:!1,configurable:!0,writable:!0,value:a})}}).polyfill();var h='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&'function'==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?'symbol':typeof a},i=function(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')},j=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,'value'in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),k=function(){function a(a,b){var c,d=[],e=!0,f=!1;try{for(var g,h=a[Symbol.iterator]();!(e=(g=h.next()).done)&&(d.push(g.value),!(b&&d.length===b));e=!0);}catch(a){f=!0,c=a}finally{try{!e&&h['return']&&h['return']()}finally{if(f)throw c}}return d}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError('Invalid attempt to destructure non-iterable instance')}}(),l=Array.isArray||function(a){return'[object Array]'===Object.prototype.toString.call(a)},m=Object.keys||function(a){var b=[];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&b.push(c);return b},n={encode:d,stringify:d,decode:f,parse:f},o=function(){function a(b,c){if(i(this,a),!b)throw new Error('Application API key is required');this.key=b,this.token=c,this.origin='https://api.trello.com',this.get=this.request.bind(this,'get'),this.post=this.request.bind(this,'post'),this.put=this.request.bind(this,'put'),this.del=this.request.bind(this,'delete')}return j(a,[{key:'request',value:function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:function(){},e=this.credentials;if('function'==typeof c?d=c:e=Object.assign(e,c),'string'==typeof b&&-1!==b.indexOf('?')){var f,g=b.split('?'),h=k(g,2);b=h[0],f=h[1],e=Object.assign(e,n.parse(f))}this._request(a,b,e,d)}},{key:'_request',value:function(a,b,c,d){var e=this.origin+b,f={method:a,contentType:'application/json',muteHttpExceptions:!0};'get'===a||'delete'===a?e+='?'+n.stringify(c):f.payload=JSON.stringify(c);var h=UrlFetchApp.fetch(e,f),i=h.getResponseCode(),j=h.getContentText();if(400<=i){var k=g(i,j,{url:e,method:a.toUpperCase()});d(k)}else d(null,JSON.parse(j))}},{key:'credentials',get:function(){return{key:this.key,token:this.token}}}]),a}();global.Http=o})();
